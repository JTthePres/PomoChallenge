<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="description" content="App metodo concentrazione pomodoro">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="icon" type="image/x-icon" href="../style/img/tomato.png">
    <script  src="../script/loginScript/loginScript.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js'></script>
    <link rel="stylesheet" href="../style/homeStyle/defaultStyle.css">

    <link rel="stylesheet" href="../style/loginStyle/loginStyle.css" >
    <link rel="stylesheet" href="../style/loginStyle/responsiveLoginStyle.css">
    <link rel="stylesheet" href="../bootstrap/dist/css/bootstrap.css" >
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js'></script>
    <script src="../bootstrap/dist/js/bootstrap.bundle.min.js" ></script>    
    
    <script>
        $(function(){
          $("#mynavbar").load("./oldNavbar.html");
        });

    </script>

</head>

<body>
    <div id="mynavbar"></div>
    <!--<div class="container">-->
        <div class="cnt">
        <div id="loginPanel">
            <FORM method="post" id="submitForm" action="../server/logIn.php"> 
                <div class="imgContainer">
                    <INPUT type="IMAGE" class="imgAvatar" SRC="../style/img/pomo.png">
                    </input>
                </div>

                <div class="infoPanel">
                
                    <fieldset name="infoField">
                        <legend>  Submit information </legend>
                            <b>Username</b>
                            <br>
                        <input type="text" name="userLogInput" id="userLogInput" placeholder=" Insert Username" required="true">
                        <br>

                            <b>Password</b>  
                            <br>
                        <input type="password" name="passwordLogInput" id="passwordLogInput" placeholder="Insert password" required="true" onkeypress="handleKeyPress(event)">
                        <img id="visiblePassword" src ="../style/img/eye-slash-solid.png" onclick="showPassword()">
                        </img>
                        <br>
                        
                        <input type="submit" id="submitBtn" class="loginButton" value="Log in">
                        <button id="clearBtn" class="loginButton" onclick="resetField()">
                            Clear 
                        </button>
                        
                        <br>
                        <label>
                            <input type="checkbox" name="remember" id="rememberCheckbox"> 
                            Remember me
                        </label>
                        <p>
                            Don't have an account yet?
                            <a href="./signupForm.html">
                            Sign up
                            </a>
                        </p>
                    </fieldset>
                </div>
            </FORM>
        </div>
   <!-- </div>-->
</div>
</body>   

</html>
<script>
 // Script per gestire i redirect del server a causa di errori o successo di registrazione
    window.onload = function() {
    if (new URLSearchParams(window.location.search).get('login') === 'failed1') {
alert('Login non riuscita, user non registrato.Riprova');
const newUrl = new URL(window.location.href);
newUrl.searchParams.delete('login');
window.history.replaceState({}, '', newUrl);//pulisci url
}
if (new URLSearchParams(window.location.search).get('login') === 'failed2') {
alert('Login non riuscita, user o psw errati.Riprova');
const newUrl = new URL(window.location.href);
newUrl.searchParams.delete('login');
window.history.replaceState({}, '', newUrl);//pulisci url
}
if (new URLSearchParams(window.location.search).get('signup') === 'success') {
alert('Registrazione correttamente riuscita.');
const newUrl = new URL(window.location.href);
newUrl.searchParams.delete('signup');
window.history.replaceState({}, '', newUrl); ////pulisci url
}
}
</script>